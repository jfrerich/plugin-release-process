---
description: >-
  Document manual steps for plugin version bumps, tagging, bundling, publishing
  to marketplace and transition to automation.
---

# Plugin Release Presentation

## List of steps \(happy path details\)

1. Bump the current version of an existing plugin
2. Tag / Cut a version of a plugin for release
3. Bundle a plugin version to a Mattermost server release
4. Publish a bumped plugin version to the Plugin Marketplace
   1. create Jira ticket for Toolkit
5. Publish a new plugin to the Plugin Marketplace
   1. Release to community.mattermost.com

## Steps Automated Now

* `Matterbuild`
  * [Docs](https://github.com/mattermost/mattermost-developer-documentation/pull/439/files)
  * [Active PR](https://github.com/mattermost/matterbuild/pull/10)

Tag / Cut a release `/mb cutPlugin --tag vX.Y.Z --repo mattermost/mattermost-plugin-<PLUGIN>`

## Next Steps

* Improve `Matterbuild` to bump versions \(`/mb bumpPlugin`\)
* Start cutting releases from Mattermost \(`/mb cutPlugin`\)
* Create Marketplace PR from Mattermost \(`/mb marketPlugin`\)
* Create bundle plugin list PR from Mattermost \(`/mb bundlePlugin`\)

## Workflow Integration Planning

Leverage `WorkFlow` and `matterbuild` to setup a plugin release process that removes the requirement for an individual to locally clone repos, manually create PRs, and Jira Tickets.

### Triggers, Steps, Actions

* **Matterbuild**
  * Actionable commands executed by `WorkFlow`
  * Generate tags to plugin channels when Github Actions complete
    * Bump - `#pluginVersionBump-<plugin_name>-<version>`
    * Cut - `#pluginVersionCut-<plugin_name>-<version>`
    * Market - `#pluginVersionMarket-<plugin_name>-<version>`
    * Bundle - `#pluginVersionBundle-<plugin_name>-<version>`
* **Triggers** 
  * Mattermost posts generated by `matterbuild`
  * Uses `Regex` and post `Tags`
    * `#pluginVersionBump-gitlab-v1.0.1`
    * `#pluginVersionBump-jira-v2.3.3`
* **Steps**
  * name: `ReleasePlugin`
  * **start\_actions**:
    * name: `TriagePlugin`
    * fields\_title: `Choose next release steps`
    * fields: 
      * name: `CutPlugin`  options: `[yes, no]`
      * name: `MarketPlugin` options: `[yes, no`
      * name: `BundlePlugin` options: `[yes, no]`

### **FAQ..**

1. **Integrate with Matterbuild commands?**     _**Yes**_.  Workflow automation uses regex matching from posts in a channel.  If `matterbuild` can recognize status of GitHub actions, and post a response to a mattermost channel, workflow can carry out the next steps from within Mattermost.  This includes submitting another `matterbuild` command.
2. **Can fields be multi-select?**       _**Yes**_.  This is useful for triage and allowing the user to chose any number of options including bumping, adding to marketplace and bundling a plugin with a Mattermost release.
3. **Trigger naming convention to setup next action?**
   1. \#pluginVersionBump-jira-2.3
   2. \#pluginVersionBump-&lt;PLUGIN\_NAME&gt;-&lt;VERSION&gt;-&lt;CHANNEL&gt;
4. **Can WorkFlow receive incoming webhooks from Github?**      _**No really**_**.**  However, an alternative is to use `matterbuild` to monitor GitHub status and post in a channel when status changes.  Examples include when reviewers have been added to PR or a PR has been merged.
5. **Earliest step workflow can be triggered?**      _**Anytime**_**.**  Workflow is triggered from a specific post in a channel.  Automation could be achieved after an initial plugin bump or a  recurring date, created by any scheduling program.

### Considerations / Limitations

1. **WorkFlow cannot parse a tag.**  A workaround is to make one workflow per plugin
2. **Plugin Bundling.**  Bump `MakeFile` plugin packages individually instead of one PR for all version bumps
3. `Matterbuild` **understands permissions. Workflow does not.**  Until this is fixed, anybody in the channel can click buttons
4. **Create New / Separate Channels.**  Overkill, but would solve another issue 3 \(above\)
5. **Workflow posts are just normal posts.  They will scroll offscreen.**  This is an issue when an action response takes considerable time. An example is when a PR is generated, but takes several hours, or days for the reviews and merging.  Perhaps pinning the post, or flagging the post as a temporary solution

